{"paper_id": "2774c8813c14a2c3be910d5c896b5143da0decc4", "metadata": {"title": "Who dies from COVID-19? Post-hoc explanations of mortality prediction models", "authors": []}, "abstract": [{"text": "using coalitional game theory, surrogate trees, and partial dependence plots 5 6 Russell Yang\u00b9 7 8 9 10 Abstract 1 As of early June, 2020, approximately 7 million COVID-19 cases and 400,000 deaths have been 2 reported. This paper examines four demographic and clinical factors (age, time to hospital, 3 presence of chronic disease, and sex) and utilizes Shapley values from coalitional game theory 4", "cite_spans": [], "ref_spans": [], "section": "Abstract"}, {"text": "and machine learning to evaluate their relative importance in predicting COVID-19 mortality.", "cite_spans": [], "ref_spans": [], "section": "Abstract"}, {"text": "The analyses suggest that out of the 4 factors studied, age is the most important in predicting 6 COVID-19 mortality, followed by time to hospital. Sex and presence of chronic disease were 7 both found to be relatively unimportant, and the two global interpretation techniques differed in 8 ranking them. Additionally, this paper creates partial dependence plots to determine and 9 visualize the marginal effect of each factor on COVID-19 mortality and demonstrates how local 10 interpretation of COVID-19 mortality prediction can be applicable in a clinical setting. Lastly, 11 this paper derives clinically applicable decision rules about mortality probabilities through a 12 parsimonious 3-split surrogate tree, demonstrating that high-accuracy COVID-19 mortality 13 prediction can be achieved with simple, interpretable models.", "cite_spans": [], "ref_spans": [], "section": "Abstract"}], "body_text": [{"text": "Interpretable machine learning is critically important in healthcare, and clinicians seek 17 explanations that justify and rationalize model predictions [1] . Medical professionals also prefer 18 parsimonious machine learning methods because of their explainability and because they are 19 more likely to conform to operational guidelines, which often include fixed attribute scores [2] . 20 Thus, feature extraction is often eschewed in medical research because it reduces interpretability 21 [2].", "cite_spans": [{"start": 153, "end": 156, "text": "[1]", "ref_id": null}, {"start": 383, "end": 386, "text": "[2]", "ref_id": null}, {"start": 389, "end": 391, "text": "20", "ref_id": null}, {"start": 491, "end": 493, "text": "21", "ref_id": null}], "ref_spans": [], "section": "16"}, {"text": ". CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity. The incubation period of COVID-19 is about 5.2 days [3] , and there is a median length of 14 24 days between onset of symptoms and death [4] . COVID-19 symptoms include pneumonia, fever, 25 fatigue, and dry cough [5] , and risk factors include pre-existing health conditions (asthma, 26 chronic lung/kidney disease, diabetes, hemoglobin disorders, being immunocompromised, 27 liver/heart disease), old age, and obesity [6] . COVID-19 mortality also varies among different 28 ethnicities, potentially due to discrimination, economic disadvantages, unequal access to health 29 care, and other factors [7] . high-sensitivity C-reactive protein) to achieve advanced individual-level COVID-19 mortality 43 predictions with 90% accuracy [12] . We hypothesize that demographic and temporal risk factors 44 . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [{"start": 216, "end": 219, "text": "[3]", "ref_id": null}, {"start": 257, "end": 259, "text": "24", "ref_id": null}, {"start": 301, "end": 304, "text": "[4]", "ref_id": null}, {"start": 351, "end": 353, "text": "25", "ref_id": null}, {"start": 377, "end": 380, "text": "[5]", "ref_id": null}, {"start": 448, "end": 450, "text": "26", "ref_id": null}, {"start": 537, "end": 539, "text": "27", "ref_id": null}, {"start": 583, "end": 586, "text": "[6]", "ref_id": null}, {"start": 763, "end": 766, "text": "[7]", "ref_id": null}, {"start": 862, "end": 864, "text": "43", "ref_id": null}, {"start": 895, "end": 899, "text": "[12]", "ref_id": null}], "ref_spans": [], "section": "22"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [], "section": "(which was not certified by peer review)"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. healthcare quality, etc.) because many samples had to be discarded in the preprocessing steps; 81 nonetheless, we hope that the relative importance of age, sex, time to hospital, and presence of 82 chronic disease will be relatively consistent between this sample and the global population. Table 1 provides summary statistics for the dataset. As shown in Table   87 1, the mean age of patients was about 48.02 (SD 18.62). 63.59% of patients were male. Chronic is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [{"start": 364, "end": 371, "text": "Table 1", "ref_id": null}, {"start": 429, "end": 439, "text": "Table   87", "ref_id": null}], "section": "(which was not certified by peer review)"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. performance in many scenarios [14] . The algorithm is highly scalable and utilizes minimal 97 . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [{"start": 103, "end": 107, "text": "[14]", "ref_id": null}], "ref_spans": [], "section": "(which was not certified by peer review)"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. 113 . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [], "section": "(which was not certified by peer review)"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. . https://doi.org/10.1101/2020.06.07.20124933 doi: medRxiv preprint 133 . CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [], "section": "(which was not certified by peer review)"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. . https://doi.org/10.1101/2020.06.07.20124933 doi: medRxiv preprint 7 LIME is a technique that uses local approximations to a machine learning model to provide is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [], "section": "(which was not certified by peer review)"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [], "section": "(which was not certified by peer review)"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. Partial dependence plots were created for each of the four explanatory variables (Fig 5) . Higher is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [{"start": 154, "end": 161, "text": "(Fig 5)", "ref_id": null}], "section": "(which was not certified by peer review)"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [], "section": "(which was not certified by peer review)"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. . https://doi.org/10.1101/2020.06.07.20124933 doi: medRxiv preprint", "cite_spans": [], "ref_spans": [], "section": "(which was not certified by peer review)"}, {"text": "The skater package in Python was also used to perform interpretation analyses. Skater, like shap, 183 has global and local interpretation abilities. As shown in Fig 7, the skater packages provides a 184 similar ordering of feature importance as the shap package. Age is the most important feature by 185 far, followed by time_to_hospital. However, skater ranks sex as more important than 186 chronic_disease_binary, while shap ranks chronic_disease_binary as more important than sex. is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [{"start": 98, "end": 101, "text": "183", "ref_id": null}], "ref_spans": [{"start": 161, "end": 167, "text": "Fig 7,", "ref_id": null}], "section": "182"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [], "section": "(which was not certified by peer review)"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. other gradient boosting algorithms) combines many trees (100 by default) as weak predictors.", "cite_spans": [], "ref_spans": [], "section": "(which was not certified by peer review)"}, {"text": "More parsimonious trees are required to find simple decision rules (heuristics) for use in a 209 clinical setting. Therefore, we create a parsimonious surrogate tree using the skater package (Fig   210   10 ). 3. If the person's age is greater than 57.5 and they get to the hospital in 2 days or less (after 221 symptom onset), the probability of mortality is 42.9%.", "cite_spans": [], "ref_spans": [{"start": 191, "end": 206, "text": "(Fig   210   10", "ref_id": null}], "section": "208"}, {"text": ". CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [], "section": "222"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. . https://doi.org/10.1101/2020.06.07.20124933 doi: medRxiv preprint 4. If the person's age is greater than 57.5 and they get to the hospital after more than 2 days, 223 the probability of mortality is 93.3%.", "cite_spans": [], "ref_spans": [], "section": "(which was not certified by peer review)"}, {"text": "Note that in this tree, the sex variable was not used, but different trees using different 225 combinations of explanatory variables can be created by tweaking the random seed of the 226 surrogate explainer. Various classification metrics were calculated to assess the prediction 227 performance of the parsimonious model on the test data (Table 3) . Interestingly, the more 228 parsimonious model still achieves a classification accuracy of 84% despite only having 3 splits. is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [{"start": 339, "end": 348, "text": "(Table 3)", "ref_id": "TABREF5"}], "section": "224"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [], "section": "(which was not certified by peer review)"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. . https://doi.org/10.1101/2020.06.07.20124933 doi: medRxiv preprint Future analysis is required to determine the joint effect of multiple features on outcome and 261 explore other demographic, spatial, temporal, and environmental factors as data on them 262 becomes readily available. 263 ", "cite_spans": [{"start": 358, "end": 361, "text": "263", "ref_id": null}], "ref_spans": [], "section": "(which was not certified by peer review)"}], "bib_entries": {"BIBREF1": {"ref_id": "b1", "title": "Contextualizing Explainable Machine Learning for Clinical End Use", "authors": [], "year": null, "venue": "", "volume": "268", "issn": "", "pages": "", "other_ids": {}}, "BIBREF2": {"ref_id": "b2", "title": "Proceedings of the 4th", "authors": [{"first": "F", "middle": [], "last": "Jim", "suffix": ""}, {"first": "J", "middle": [], "last": "Ken", "suffix": ""}, {"first": "K", "middle": [], "last": "David", "suffix": ""}, {"first": "R", "middle": [], "last": "Rajesh", "suffix": ""}, {"first": "W", "middle": [], "last": "Byron", "suffix": ""}], "year": null, "venue": "", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF3": {"ref_id": "b3", "title": "Machine Learning for Healthcare Conference; Proceedings of Machine Learning 270 Research: PMLR", "authors": [], "year": 2019, "venue": "", "volume": "", "issn": "", "pages": "359--80", "other_ids": {}}, "BIBREF4": {"ref_id": "b4", "title": "Making machine learning 272 models interpretable", "authors": [{"first": "A", "middle": [], "last": "Vellido", "suffix": ""}, {"first": "J", "middle": ["D"], "last": "Mart\u00edn-Guerrero", "suffix": ""}, {"first": "Pjg", "middle": [], "last": "Lisboa", "suffix": ""}], "year": 2012, "venue": "", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF5": {"ref_id": "b5", "title": "Early Transmission Dynamics 274 in Wuhan, China, of Novel Coronavirus-Infected Pneumonia", "authors": [{"first": "Q", "middle": [], "last": "Li", "suffix": ""}, {"first": "X", "middle": [], "last": "Guan", "suffix": ""}, {"first": "P", "middle": [], "last": "Wu", "suffix": ""}, {"first": "X", "middle": [], "last": "Wang", "suffix": ""}, {"first": "L", "middle": [], "last": "Zhou", "suffix": ""}, {"first": "Y", "middle": [], "last": "Tong", "suffix": ""}], "year": 2020, "venue": "New England Journal 275 of Medicine", "volume": "382", "issn": "13", "pages": "1199--207", "other_ids": {}}, "BIBREF6": {"ref_id": "b6", "title": "Updated understanding of the outbreak of 2019 novel 277 coronavirus (2019-nCoV) in Wuhan", "authors": [{"first": "W", "middle": [], "last": "Wang", "suffix": ""}, {"first": "J", "middle": [], "last": "Tang", "suffix": ""}, {"first": "F", "middle": [], "last": "Wei", "suffix": ""}], "year": null, "venue": "China. Journal of Medical Virology", "volume": "278", "issn": "2020", "pages": "441--448", "other_ids": {}}, "BIBREF7": {"ref_id": "b7", "title": "Clinical characteristics and 280 outcomes of patients undergoing surgeries during the incubation period of COVID-19 281 infection", "authors": [{"first": "S", "middle": [], "last": "Lei", "suffix": ""}, {"first": "F", "middle": [], "last": "Jiang", "suffix": ""}, {"first": "W", "middle": [], "last": "Su", "suffix": ""}, {"first": "C", "middle": [], "last": "Chen", "suffix": ""}, {"first": "J", "middle": [], "last": "Chen", "suffix": ""}, {"first": "W", "middle": [], "last": "Mei", "suffix": ""}], "year": 2020, "venue": "EClinicalMedicine", "volume": "21", "issn": "", "pages": "", "other_ids": {}}, "BIBREF8": {"ref_id": "b8", "title": "COVID-19 and Racial/Ethnic 285 Disparities", "authors": [{"first": "Webb", "middle": [], "last": "Hooper", "suffix": ""}, {"first": "M", "middle": [], "last": "N\u00e1poles", "suffix": ""}, {"first": "A", "middle": ["M"], "last": "P\u00e9rez-Stable", "suffix": ""}, {"first": "E", "middle": ["J"], "last": "", "suffix": ""}], "year": null, "venue": "JAMA", "volume": "2020", "issn": "", "pages": "", "other_ids": {}}, "BIBREF9": {"ref_id": "b9", "title": "A Framework for Rationing Ventilators and Critical Care Beds 287 During the COVID-19 Pandemic", "authors": [{"first": "D", "middle": ["B"], "last": "White", "suffix": ""}, {"first": "B", "middle": [], "last": "Lo", "suffix": ""}], "year": 2020, "venue": "JAMA", "volume": "323", "issn": "18", "pages": "1773--1777", "other_ids": {}}, "BIBREF10": {"ref_id": "b10", "title": "ICU 289 occupancy and mechanical ventilator use in the United States", "authors": [{"first": "H", "middle": [], "last": "Wunsch", "suffix": ""}, {"first": "J", "middle": [], "last": "Wagner", "suffix": ""}, {"first": "M", "middle": [], "last": "Herlim", "suffix": ""}, {"first": "D", "middle": ["H"], "last": "Chong", "suffix": ""}, {"first": "A", "middle": ["A"], "last": "Kramer", "suffix": ""}, {"first": "S", "middle": ["D"], "last": "Halpern", "suffix": ""}], "year": 2013, "venue": "Critical care medicine", "volume": "290", "issn": "", "pages": "2712--2721", "other_ids": {}}, "BIBREF11": {"ref_id": "b11", "title": "Modified SEIR and 292 AI prediction of the epidemics trend of COVID-19 in China under public health 293 interventions", "authors": [{"first": "Z", "middle": [], "last": "Yang", "suffix": ""}, {"first": "Z", "middle": [], "last": "Zeng", "suffix": ""}, {"first": "K", "middle": [], "last": "Wang", "suffix": ""}, {"first": "S-S", "middle": [], "last": "Wong", "suffix": ""}, {"first": "W", "middle": [], "last": "Liang", "suffix": ""}, {"first": "M", "middle": [], "last": "Zanin", "suffix": ""}], "year": 2020, "venue": "Journal of thoracic disease", "volume": "12", "issn": "3", "pages": "165--74", "other_ids": {}}, "BIBREF12": {"ref_id": "b12", "title": "Spatial-temporal distribution of COVID-19 in China and 295 its prediction: A data-driven modeling analysis. The Journal of Infection in 296 Developing Countries", "authors": [{"first": "H", "middle": [], "last": "Rui", "suffix": ""}, {"first": "L", "middle": [], "last": "Miao", "suffix": ""}, {"first": "D", "middle": [], "last": "Yongmei", "suffix": ""}], "year": 2020, "venue": "", "volume": "14", "issn": "", "pages": "", "other_ids": {}}, "BIBREF14": {"ref_id": "b14", "title": "doi: medRxiv preprint mortality prediction model for COVID-19 patients", "authors": [], "year": null, "venue": "Nature Machine Intelligence", "volume": "299", "issn": "2020", "pages": "283--291", "other_ids": {"DOI": ["10.1101/2020.06.07.20124933"]}}, "BIBREF16": {"ref_id": "b16", "title": "Epidemiological data from the COVID-19 outbreak, real-time case information", "authors": [], "year": null, "venue": "", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF18": {"ref_id": "b18", "title": "XGBoost: A Scalable Tree Boosting System", "authors": [{"first": "T", "middle": [], "last": "Chen", "suffix": ""}, {"first": "C", "middle": [], "last": "Guestrin", "suffix": ""}], "year": null, "venue": "Proceedings of the 304 22nd ACM SIGKDD International Conference on Knowledge Discovery and Data", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF19": {"ref_id": "b19", "title": "A Unified Approach to Interpreting Model Predictions", "authors": [{"first": "S", "middle": [], "last": "Lundberg", "suffix": ""}, {"first": "S-I", "middle": [], "last": "Lee", "suffix": ""}], "year": 2017, "venue": "ArXiv", "volume": "307", "issn": "", "pages": "", "other_ids": {}}, "BIBREF20": {"ref_id": "b20", "title": "Consistent Individualized Feature Attribution for 309", "authors": [{"first": "S", "middle": ["M"], "last": "Lundberg", "suffix": ""}, {"first": "G", "middle": ["G"], "last": "Erion", "suffix": ""}, {"first": "S-I", "middle": [], "last": "Lee", "suffix": ""}], "year": null, "venue": "", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF21": {"ref_id": "b21", "title": "Peeking Inside the Black Box", "authors": [{"first": "A", "middle": [], "last": "Goldstein", "suffix": ""}, {"first": "A", "middle": [], "last": "Kapelner", "suffix": ""}, {"first": "J", "middle": [], "last": "Bleich", "suffix": ""}, {"first": "E", "middle": [], "last": "Pitkin", "suffix": ""}], "year": 2018, "venue": "Tree Ensembles. ArXiv", "volume": "17", "issn": "", "pages": "", "other_ids": {}}, "BIBREF22": {"ref_id": "b22", "title": "Visualizing Statistical Learning With Plots of Individual Conditional Expectation", "authors": [{"first": "M", "middle": ["T"], "last": "Ribeiro", "suffix": ""}, {"first": "S", "middle": [], "last": "Singh", "suffix": ""}, {"first": "C", "middle": [], "last": "Guestrin", "suffix": ""}], "year": 2015, "venue": "Proceedings of the 22nd ACM SIGKDD International", "volume": "24", "issn": "", "pages": "", "other_ids": {}}, "BIBREF23": {"ref_id": "b23", "title": "Conference on Knowledge Discovery and Data Mining", "authors": [], "year": null, "venue": "", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF24": {"ref_id": "b24", "title": "Surrogate Decision Tree Visualization", "authors": [{"first": "F", "middle": ["D"], "last": "Castro", "suffix": ""}, {"first": "E", "middle": [], "last": "Bertini", "suffix": ""}], "year": null, "venue": "", "volume": "", "issn": "", "pages": "", "other_ids": {}}, "BIBREF25": {"ref_id": "b25", "title": "On the interpretability of machine learning-based 320 model for predicting hypertension", "authors": [{"first": "R", "middle": [], "last": "Elshawi", "suffix": ""}, {"first": "M", "middle": ["H"], "last": "Al-Mallah", "suffix": ""}, {"first": "S", "middle": [], "last": "Sakr", "suffix": ""}], "year": 2019, "venue": "BMC Medical Informatics and Decision Making", "volume": "321", "issn": "1", "pages": "146--322", "other_ids": {}}, "BIBREF27": {"ref_id": "b27", "title": "Projecting hospital utilization during the COVID-19 outbreaks in the United States", "authors": [], "year": null, "venue": "", "volume": "", "issn": "", "pages": "", "other_ids": {}}}, "ref_entries": {"FIGREF1": {"text": "are scarce and ethical dilemmas arise in deciding how to allocate limited hospital 32 resources [8]. The demand for ICUs and beds in hospitals is increasing as the number of cases 33 rise, and ICUs already had high occupancy before the pandemic. Previous estimates of mean 34 hourly occupancy of ICUs put the number at about 68.2% [9].", "latex": null, "type": "figure"}, "FIGREF2": {"text": "the current COVID-19 informatics literature focuses on macro-level disease forecasting 37 using machine learning and statistical techniques, with few studies focusing on individual-level 38 predictions. For example, [10] utilizes a SEIR (Susceptible-Exposed-Infectious-Removed) 39 differential equation-based model to predict the sizes and peaks of the COVID-19 pandemic, and 40 [11] utilizes a logistic model to understand the COVID-19 case trend. One study published in 41 Nature Machine Intelligence used various biomarkers (lactic dehydrogenase, lymphocyte and42", "latex": null, "type": "figure"}, "FIGREF3": {"text": "). Patients with other outcome values ('severe', 'stable,' 'Symptoms only improved with 70 cough. Currently hospitalized for follow-up.') were removed from the analysis. For samples 71where an age range was given instead of a single number, the lower and upper limits of the range 72 were averaged to produce a single number. One sample was assumed to have a coding error in 73 the date_onset_symptoms column and was removed. A new derived column to represent time 74 from onset of symptoms to hospital admission was created (time_to_hospital = 75 date_admission_hospital -date_onset_symptoms). One sample had a negative value for 76 time_to_hospital, which was assumed to be the result of a coding error and was removed.", "latex": null, "type": "figure"}, "FIGREF4": {"text": "and cleaning the dataset, 184 viable patients remained. These 184 patients may not 79 necessarily be representative of the global population (in terms of geographic location,80", "latex": null, "type": "figure"}, "FIGREF5": {"text": ", some individuals may have experienced mortality after being discharged from the 84 hospital, but that information was not included in the dataset. Here, we provide visualizations85 and descriptive statistics to understand the 184-patient dataset. Fig 1 provides histograms of the 86 continuous covariates and", "latex": null, "type": "figure"}, "FIGREF6": {"text": "88disease was present in 20.11% of individuals, and the average time to hospital was 5.17 (SD89 4.28). Approximately 25.54% of individuals in the dataset experienced mortality.", "latex": null, "type": "figure"}, "FIGREF8": {"text": "Skater package was also employed for model interpretation. The package was used to create 123 model-agnostic partial dependence plots and perform local interpretation using LIME (Local124 Interpretable Model-Agnostic Explanations). Additionally, parsimonious tree surrogates were 125 created. Partial dependence plots specify the marginal effect of features on the response variable 126 in a model. According to [17], the partial dependence is given by the following formula, where S 127 is a subset of predictor indices and C is the complement of S: 128 = [ ( , )] = \ufffd ( , ) ( ) 129 In practice, partial dependence is estimated using the following formula, where N is the number 130 of samples in the training set and 1 through are observed values of from the training set", "latex": null, "type": "figure"}, "FIGREF9": {"text": "134interpretations of the prediction of any sample[18]. Roughly speaking, LIME perturbs the model 135 many times to determine the influence of each explanatory variable on the outcome variable. 136 LIME allows for rapid and clinically useful local interpretation of the model's predictions.137 Furthermore, LIME explanations are locally faithful [18]. Surrogate trees are approximations of 138 complex models (such as those produced by the XGBoost algorithm). They are model-agnostic 139 since they can be trained by observing inputs and outputs of the underlying model [19]. 140 Unfortunately (but unsurprisingly), a tradeoff exists between fidelity (how well the surrogate can 141 approximate the original model) and model complexity [19].", "latex": null, "type": "figure"}, "FIGREF10": {"text": "TreeExplainer from the shap package in Python was used to calculate Shapley values. The 146 TreeExplainer object can be used for global interpretations of the model as well as local 147 interpretations of the prediction for any individual. In Fig 2, the relative importance of 148 explanatory variables is plotted. According to the Shapley values, age is the most important of 149 the 4 features, followed by time_to_hospital, chronic_disease_binary, then sex.", "latex": null, "type": "figure"}, "FIGREF12": {"text": "example local interpretations for two patients. In the figure, values of certain 154 features 'push' the prediction from an initial base value (bias) to a final model output value. In the 155 first patient, the low age (38) was the major factor that pushed the patient towards a smaller 156 model output value, whereas in the second patient, the high age (82) pushed the patient towards a 157 higher value. Also, being male pushed the model output up in the first patient and being female 158 pushed the model output down in the second patient. In the first individual, absence of chronic 159 disease pushes the model output down, while presence of chronic disease pushes the output up in 160 the second individual. Interestingly, a time to hospital value of 7 pushes one individual down and 161 the other up.", "latex": null, "type": "figure"}, "FIGREF14": {"text": ", created using the shap package, shows local interpretations for all patients on one graph.165The magnitude of the SHAP value quantifies the importance of the feature in the model, and166 each dot signifies a Shapley value for an individual's feature. 167 Fig 4: SHAP Interpretation for all patients 168 169", "latex": null, "type": "figure"}, "FIGREF15": {"text": "170 values of age are associated with higher SHAP values. Values of 1 for sex (male) are associated 171 with higher SHAP values than 0 for sex (female). Likewise, values of 1 for 172 chronic_disease_binary (chronic disease present) are associated with higher SHAP values than 0 173 for chronic_disease_binary (chronic disease absent). The partial dependence plot for 174 time_to_hospital exhibits heteroskedasticity and cannot be easily interpreted.", "latex": null, "type": "figure"}, "FIGREF17": {"text": "the partial dependence plot for age, and points are colored by time_to_hospital to 178 elucidate potential interactions between age and time_to_hospital. Partial dependence plot for age with interaction index set to", "latex": null, "type": "figure"}, "FIGREF18": {"text": "Barplot of relative feature importance of explanatory variables as assessed by skater LimeTabularExplainer object was then created using the skater package. LIME (Local 191 Interpretable Model-Agnostic Explanations) was used to perform local interpretations. Fig 8 lists 192 the factors contributing to recovery/death and summarizes them in a table, where orange colored 193 factors are those that contribute to mortality and blue colored factors are those that contribute to 194 recovery. For example, in the bottom patient (predicted to experience mortality), the high age, 195 presence of chronic disease, and time to hospital all contribute to the high probability of death.", "latex": null, "type": "figure"}, "FIGREF20": {"text": "LIME local interpretations for a patient who experienced recovery and was 197 predicted to recover (top) and for a patient who experienced mortality and was predicted 198 to die (bottom).199 200Skater also provides functionality for creation of partial dependence plots.Fig 9 shows one-way 201 partial dependence plots created by the skater package. These appear to be similar to the plots 202 created using the shap package. Partial dependence plots with error bars as created by the skater package", "latex": null, "type": "figure"}, "FIGREF21": {"text": "A parsimonious 3-split surrogate decision tree. X0, X1, X2 and X3 are age, sex, 212 chronic_disease_binary, and time_to_hospital respectively.", "latex": null, "type": "figure"}, "FIGREF22": {"text": "thumb can easily be extracted from this parsimonious tree. In this tree, four simple 215 decision rules can be extracted: 216 1. If the person's age is 57.5 or less and they do not have chronic disease, the probability of 217 mortality is 3.5%. 218 2. If the person's age is 57.5 or less and they have chronic disease, the probability of 219 mortality is 66.7%.", "latex": null, "type": "figure"}, "FIGREF24": {"text": "important than sex. Lastly, a surrogate tree model was developed by perturbing the 240 XGBoost model's inputs and observing the outputs. The surrogate tree achieved a high degree of 241 parsimony while retaining a relatively high predictive accuracy of 84%. Because of its 242 parsimony, the surrogate tree model retains interpretability and can potentially be used in a 243 clinical setting. Furthermore, rules-of-thumb about COVID-19 mortality probabilities can easily 244 be derived by tracing different root-to-leaf paths on the tree.", "latex": null, "type": "figure"}, "FIGREF25": {"text": "are not generally well-equipped to handle pandemics, and many hospitals are 247 facing resource shortages. Some estimates suggest that at the peak of the COVID-19 outbreak in 248 the US, the number of ICU beds required would be 3.8 times the number in existence [21]. 249 COVID-19 mortality prediction models can potentially be used to help allocate resources to 250 those with the highest risk of dying in hospitals with limited resources and high load. In addition 251 to developing as a potential tool for clinical resource allocation, this study determines the relative 252 importance of four suspected risk factors and demonstrates the viability of local model 253 interpretations for data-driven clinical decision-making.", "latex": null, "type": "figure"}, "FIGREF26": {"text": "best of our knowledge, no other published studies have predicted COVID-19 mortality 256 solely off of demographic and temporal variables. This paper demonstrates that COVID-19 257 mortality prediction can be accomplished with 91% accuracy (or 84% in the parsimonious 258 model) without the use of cellular, molecular, and chemical biomarkers.", "latex": null, "type": "figure"}, "TABREF0": {"text": "can explain COVID-19 mortality as well, avoiding the time and cost associated with biomarker Recently, epidemiological datasets with demographic, geographic, and temporal data have become available and have opened up new dimensions for COVID-19 modeling. One such dataset is[13]. This study focuses on ranking the relative importance of age, time to hospital after symptom onset, sex, and presence of chronic disease in COVID-19 mortality prediction and developing a framework for local interpretation of COVID-19 mortality predictions in clinical This analysis utilized publicly available individual-level epidemiological data as of June 4th, 2020 [13]. The dataset includes various temporal, demographic, geographic, and environmental attributes, including age, sex, city, province, country, sourced from Wuhan or elsewhere, latitude, longitude, etc. It was aggregated from various sources and is extremely sparse. Several preprocessing steps were employed to filter and clean the data. suspected risk factors were studied as explanatory variables: age, time from onset of symptoms to hospital admission, sex, and presence of chronic disease. The outcome variable was binary:either recovery or mortality. The dataset was subsetted to include only relevant columns. The sex binary categorical variable was encoded to numeric values. Samples were removed from the analysis if they had missing values for any of the relevant variables. There was heterogeneity in", "latex": null, "type": "table"}, "TABREF1": {"text": "Fig 1: Histograms for the two continuous covariates (age and time_to_hospital) Descriptive statistics for variables in the 184-patient dataset.", "latex": null, "type": "table"}, "TABREF2": {"text": "machine resources[14]. The model was trained with default parameters using the Python xgboost package.Table 2 shows various classification metrics of the XGBoost model when itwas trained on 70% of the data and tested on the remaining 30%. The model achieves an testing100 accuracy of 0.91. Classification report for XGBoost model predictions on test set SHAP is a method for model interpretation that relies on the Shapley value, a solution concept in 105 coalitional game theory. In coalitional game theory, the Shapley value represents a distribution 106 of a collective payoff/prediction among multiple participants/features. In feature interpretation 107 using Shapley values, predictions are compared between models with and without each feature 108 so that importance values can be assigned to each feature. Shapley values are given by the 109 following formula, where F is the feature set, the summation is over all the possible feature 110 subsets, the expression in brackets is the difference in predictions between a model trained on the 111 feature subset and a model trained on the same feature subset but also with feature i, and the", "latex": null, "type": "table"}, "TABREF3": {"text": "} Intuitively the Shapley value can be interpreted as the expected value of the marginal 115 contribution to the coalition, and it is computed by adding each feature to a model and understanding how it impacts the prediction. Shapley feature attribution methods possess several", "latex": null, "type": "table"}, "TABREF4": {"text": "Although tree-based models are generally considered to be interpretable[20], XGBoost (like", "latex": null, "type": "table"}, "TABREF5": {"text": "Classification report for 3-split surrogate tree predictions on test set This paper developed an XGBoost model for prediction of individual-level COVID-19 mortality and performed global and local model interpretations using Shapley values from coalitional game theory. Global and local intepretations were also performed using the skater package. Both methods resulted in the similar ranking of the relative importance of the four explanatory variables studied, placing age as the most important feature and time to hospital after symptom onset as the second most important. The interpretation techniques differed in that one ranked sex as more important than chronic disease presence while the other ranked chronic disease presence 239 . CC-BY-NC-ND 4.0 International license It is made available under a", "latex": null, "type": "table"}, "TABREF6": {"text": "Table 1. Descriptive statistics for variables in the 184-patient dataset. 93", "latex": null, "type": "table", "html": "<html><body><table><tr><td>\u00a0</td><td>age (yrs) </td><td>time_to_hospital (days) </td><td>sex </td><td>chronic_disease_binary </td><td>outcome </td></tr><tr><td>mean </td><td>48.019022 </td><td>5.168478 </td><td>0.635870 </td><td>0.201087 </td><td>0.255435 </td></tr><tr><td>std </td><td>18.615785 </td><td>4.279687 </td><td>\u00a0</td><td>\u00a0</td><td>\u00a0</td></tr><tr><td>min </td><td>1 </td><td>0 </td><td>\u00a0</td><td>\u00a0</td><td>\u00a0</td></tr><tr><td>Q1 </td><td>33 </td><td>2 </td><td>\u00a0</td><td>\u00a0</td><td>\u00a0</td></tr><tr><td>median </td><td>46 </td><td>5 </td><td>Not applicable for binary data </td></tr><tr><td>Q3 </td><td>61 </td><td>7 </td><td>\u00a0</td><td>\u00a0</td><td>\u00a0</td></tr><tr><td>\u00a0</td><td>\u00a0</td><td>\u00a0</td><td>max </td><td>89 </td><td>26 </td></tr></table></body></html>"}, "TABREF7": {"text": "Table 2: Classification report for XGBoost model predictions on test set 102", "latex": null, "type": "table", "html": "<html><body><table><tr><td>\u00a0</td><td>Precision </td><td>Recall </td><td>F1 Score </td><td>Support </td></tr><tr><td>0 (Recovery) </td><td>0.95 </td><td>0.93 </td><td>0.94 </td><td>44 </td></tr><tr><td>1 (Mortality) </td><td>0.77 </td><td>0.83 </td><td>0.80 </td><td>12 </td></tr><tr><td>Accuracy </td><td>\u00a0</td><td>\u00a0</td><td>0.91 </td><td>56 </td></tr><tr><td>Macro Avg </td><td>0.86 </td><td>0.88 </td><td>0.87 </td><td>56 </td></tr><tr><td>Weighted Avg </td><td>0.91 </td><td>0.91 </td><td>0.91 </td><td>56 </td></tr></table></body></html>"}, "TABREF8": {"text": "Table 3: Classification report for 3-split surrogate tree predictions on test set 230", "latex": null, "type": "table", "html": "<html><body><table><tr><td>\u00a0</td><td>Precision </td><td>Recall </td><td>F1 Score </td><td>Support </td></tr><tr><td>0 (Recovery) </td><td>0.95 </td><td>0.84 </td><td>0.89 </td><td>44 </td></tr><tr><td>1 (Mortality) </td><td>0.59 </td><td>0.83 </td><td>0.69 </td><td>12 </td></tr><tr><td>Accuracy </td><td>\u00a0</td><td>\u00a0</td><td>0.84 </td><td>56 </td></tr><tr><td>Macro Avg </td><td>0.77 </td><td>0.84 </td><td>0.79 </td><td>56 </td></tr><tr><td>Weighted Avg </td><td>0.87 </td><td>0.84 </td><td>0.85 </td><td>56 </td></tr></table></body></html>"}}, "back_matter": [{"text": "None 265", "cite_spans": [], "ref_spans": [], "section": "264"}, {"text": "Proceedings of the National Academy of Sciences. 2020;117(16):9122-6.", "cite_spans": [], "ref_spans": [], "section": "annex"}, {"text": ". CC-BY-NC-ND 4.0 International license It is made available under a is the author/funder, who has granted medRxiv a license to display the preprint in perpetuity.", "cite_spans": [], "ref_spans": [], "section": "325"}, {"text": "The copyright holder for this preprint this version posted June 9, 2020. . https://doi.org/10.1101/2020.06.07.20124933 doi: medRxiv preprint", "cite_spans": [], "ref_spans": [], "section": "(which was not certified by peer review)"}]}